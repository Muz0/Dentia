<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Diş Klinikası | Bəyaz diş - Stomatoloji Klinika</title>
    <link rel="icon" href="images/icon.webp" type="image/gif" sizes="16x16" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      content="Diş Klinikası | Bəyaz diş - Stomatoloji Klinika"
      name="description"
    />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/swiper.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <!-- color scheme -->
    <link
      id="colors"
      href="css/colors/scheme-01.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body>
    <div id="wrapper">
      <a href="#" id="back-to-top"></a>

      <!-- preloader begin -->
      <div id="de-loader"></div>
      <!-- preloader end -->

      <!-- header begin -->
      <header class="transparent header-light">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="de-flex sm-pt10">
                <div class="de-flex-col">
                  <!-- logo begin -->
                  <div id="logo">
                    <a href="index.html">
                      <img
                        class="logo-main"
                        src="images/beyazdis-logo.png"
                        alt=""
                      />
                      <img
                        class="logo-scroll"
                        src="images/beyazdis-logo.png"
                        alt=""
                      />
                      <img
                        class="logo-mobile"
                        src="images/beyazdis-logo.png"
                        alt=""
                      />
                    </a>
                  </div>
                  <!-- logo end -->
                </div>
                <div class="de-flex-col header-col-mid">
                  <!-- mainemenu begin -->
                  <ul id="mainmenu">
                    <li>
                      <a class="menu-item" href="index.html">Əsas səhifə</a>
                    </li>
                    <li>
                      <a class="menu-item" href="services.html">Xidmətlər</a>
                      <ul>
                        <li>
                          <a href="service-surgical-dentistry.html"
                            >Cərrahi stomatologiya</a
                          >
                        </li>
                        <li>
                          <a href="service-aesthetic.html.html"
                            >Estetik stomatologiya</a
                          >
                        </li>
                        <li>
                          <a href="service-pediatric-dentistry.html"
                            >Uşaq stomatologiyası
                          </a>
                        </li>
                        <li>
                          <a href="service-general-dentistry.html"
                            >Terapevtik stomatologiya</a
                          >
                        </li>
                        <li>
                          <a href="service-preventive-dentistry.html"
                            >Profilaktik stomatologiya</a
                          >
                        </li>
                        <li>
                          <a href="service-orthodontics.html">Ortodontiya</a>
                        </li>
                        <li>
                          <a href="services.html">Hamısına bax</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="menu-item" href="dentists.html">Həkimlərimiz</a>
                    </li>
                    <li>
                      <a class="menu-item" href="about.html">Haqqımızda</a>
                    </li>
                    <li>
                      <a class="menu-item" href="blog.html">Blog</a>
                    </li>
                    <li>
                      <a class="menu-item" href="packages.html"
                        >Xüssui təkliflər</a
                      >
                    </li>
                    <li>
                      <a href="lobaratory.html" class="menu-item"
                        >Laboratoriyamiz</a
                      >
                    </li>
                    <li>
                      <a class="menu-item" href="#">Əlaqə</a>
                    </li>
                  </ul>
                  <!-- mainmenu end -->
                </div>
                <div class="de-flex-col">
                  <div class="menu_side_area">
                    <a href="tel:+994105110801" class="btn-main fx-slide"
                      ><span>+994 10 511 08 01</span></a
                    >
                    <span id="menu-btn"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- header end -->
      <!-- content begin -->
      <div class="no-bottom no-top" id="content">
        <div id="top"></div>

        <section id="subheader" class="bg-color-op-1 text-center">
          <div class="container relative z-2">
            <div class="row align-items-center">
              <div class="col-lg-12">
                <h1 class="wow fadeInUp">Laboratoriyamiz</h1>
                <div class="border-bottom my-3"></div>
                <ul class="crumb wow fadeInDown">
                  <li><a href="index.html">Əass səhifə</a></li>
                  <li class="active">Sənədlər</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <section id="section-gallery" class="bg-light">
          <div class="container">
            <div class="row mb-4">
              <div class="col-12 text-center">
                <!-- Filters will be injected here by JS -->
                <ul id="filters" class="wow fadeInUp" data-wow-delay="0s">
                  <li>
                    <a href="#" data-filter="*" class="selected">Hamısı</a>
                  </li>
                  <li><a href="#" data-filter=".image">Şəkillər</a></li>
                  <li><a href="#" data-filter=".video">Videolar</a></li>
                  <li><a href="#" data-filter=".pdf">PDF-lər</a></li>
                  <!-- <li></li> -->
                </ul>
              </div>
            </div>
          </div>
          <div id="gallery" class="row g-3" style="overflow-x: hidden"></div>
          <!-- </div> -->
        </section>
      </div>
      <!-- content end -->

      <!-- footer begin -->
      <footer class="section-dark">
        <div class="container">
          <div class="row gx-5">
            <div class="col-lg-4 col-sm-6">
              <img src="images/beyazdis-logo.png" class="logo-footer" alt="" />
              <div class="spacer-20"></div>
              <p>
                Ən müasir texniki vasitələrlə təchiz edilmiş klinika göstərilən
                xidmətin yüksək keyfiyyətinə zəmanət verir. Klinikamız
                əməliyyatxana da daxil olmaqla, yeni nəsil stomatoloji
                qurğularla təchiz olunmuş 5 kabinetdən ibarətdir.
              </p>

              <div class="social-icons mb-sm-30">
                <a
                  href="https://www.facebook.com/bayazdish"
                  target="_blank"
                  rel="noopener"
                >
                  <i class="fa-brands fa-facebook-f"></i>
                </a>
                <!-- <a href="https://twitter.com" target="_blank" rel="noopener">
                  <i class="fa-brands fa-x-twitter"></i>
                </a> -->
                <a
                  href="https://wa.me/+994105115108"
                  target="_blank"
                  rel="noopener"
                >
                  <i class="fa-brands fa-whatsapp"></i>
                </a>
                <a
                  href="https://www.instagram.com/beyaz.dish/"
                  target="_blank"
                  rel="noopener"
                >
                  <i class="fa-brands fa-instagram"></i>
                </a>
                <a
                  href="https://www.youtube.com/@Beyaz_Dish"
                  target="_blank"
                  rel="noopener"
                >
                  <i class="fa-brands fa-youtube"></i>
                </a>
                <a
                  href="https://www.tiktok.com/@beyaz_dish_"
                  target="_blank"
                  rel="noopener"
                >
                  <i class="fa-brands fa-tiktok"></i>
                </a>
              </div>
            </div>
            <div class="col-lg-4 col-sm-12 order-lg-1 order-sm-2">
              <div class="row">
                <div class="col-lg-6 col-sm-6">
                  <div class="widget">
                    <h5>Klinika</h5>
                    <ul>
                      <li>
                        <a href="index.html">Əsas səhifə</a>
                      </li>
                      <li>
                        <a href="services.html">Xidmətlərimiz</a>
                      </li>
                      <li>
                        <a href="gallery.html">Qalereya</a>
                      </li>
                      <li>
                        <a href="about.html">Haqqımızda</a>
                      </li>
                      <li>
                        <a href="blog.html">Bloq</a>
                      </li>
                      <li>
                        <a href="#">Əlaqə</a>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                  <div class="widget">
                    <h5>Xidmətlərimiz</h5>
                    <ul>
                      <li>
                        <a href="service-surgical-dentistry.html"
                          >Cərrahi stomatologiya</a
                        >
                      </li>
                      <li>
                        <a href="service-aesthetic.html.html"
                          >Estetik stomatologiya</a
                        >
                      </li>
                      <li>
                        <a href="service-pediatric-dentistry.html"
                          >Uşaq stomatologiyası</a
                        >
                      </li>
                      <li>
                        <a href="service-restorative-dentistry.html"
                          >Terapevtik stomatologiya</a
                        >
                      </li>
                      <li>
                        <a href="service-preventive-dentistry.html"
                          >Profilaktik stomatologiya</a
                        >
                      </li>
                      <li>
                        <a href="service-orthodontics.html">Ortodontiya</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 order-lg-2 order-sm-1">
              <div class="widget">
                <h5>Bizimlə Əlaqə</h5>
                <div class="fw-bold text-white">
                  <i class="icofont-location-pin me-2 id-color"></i>Klinikanın
                  Ünvanı
                </div>
                Fatali Khan Khoyski/ Khasanoglu, Baku, Azerbaijan
                <div class="spacer-20"></div>

                <div class="fw-bold text-white">
                  <i class="icofont-phone me-2 id-color"></i>Zəng Edin
                </div>
                <a href="tel:+994105110801" class="btn-main fx-slide"
                  ><span>+994 10 511 08 01</span></a
                >

                <div class="spacer-20"></div>

                <div class="fw-bold text-white">
                  <i class="icofont-envelope me-2 id-color"></i>Mesaj Göndərin
                </div>
                <a href="mailto:beyazdish1972@gmail.com"
                  >beyazdish1972@gmail.com</a
                >
              </div>
            </div>
          </div>
        </div>
        <div class="subfooter">
          <div class="container">
            <div class="row">
              <div class="col-md-12">
                <div class="de-flex">
                  <div class="de-flex-col">
                    Copyright 2025 -
                    <a href="https://www.archdigital.org/">Arch Digital </a>
                  </div>
                  <ul class="menu-simple">
                    <li>
                      <a href="#">Terms &amp; Conditions</a>
                    </li>
                    <li><a href="#">Privacy Policy</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </footer>
      <!-- footer end -->
    </div>

    <!-- Javascript Files
    ================================================== -->
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
    <script src="js/swiper.js"></script>
    <script src="js/custom-swiper-1.js"></script>
    <!-- 1) jQuery (required by Magnific Popup) -->
    <script>
      /**
       * ─────────────────────────────────────────────────────────────────────────────
       *  Configuration / Toggle
       * ─────────────────────────────────────────────────────────────────────────────
       */
      const USE_LOCAL_STORAGE = true;
      const STORAGE_KEY = "galleryMedia";

      // Replace with your actual Supabase values:
      const API_BASE = "https://faodhpwvhonpyxlughls.supabase.co/rest/v1";
      const API_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZhb2RocHd2aG9ucHl4bHVnaGxzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2OTI5MTEsImV4cCI6MjA2NDI2ODkxMX0.2yXQKif90Arr1yjVohA8PXj1zJ4Kxn3tj8aJtae3yic";
      const TABLE_NAME = "laboratory";

      // ─────────────────────────────────────────────────────────────────────────────
      //  Headers for Supabase REST calls
      // ─────────────────────────────────────────────────────────────────────────────
      const headers = {
        apikey: API_KEY,
        Authorization: `Bearer ${API_KEY}`,
        "Content-Type": "application/json",
      };

      // ─────────────────────────────────────────────────────────────────────────────
      //  Grab target containers from the DOM
      // ─────────────────────────────────────────────────────────────────────────────
      const galleryContainer = document.getElementById("gallery");
      let currentData = [];

      // ─────────────────────────────────────────────────────────────────────────────
      //  1) Fetch fresh data from Supabase and cache in LocalStorage
      // ─────────────────────────────────────────────────────────────────────────────
      async function fetchGalleryData() {
        const url = `${API_BASE}/${TABLE_NAME}?select=*`;
        const response = await fetch(url, {
          method: "GET",
          headers,
        });
        if (!response.ok) {
          throw new Error(`Failed to fetch gallery data (${response.status}).`);
        }
        const data = await response.json();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        return data;
      }

      // ─────────────────────────────────────────────────────────────────────────────
      //  2) Read from LocalStorage (if available)
      // ─────────────────────────────────────────────────────────────────────────────
      function getStoredGalleryData() {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : [];
      }

      // ─────────────────────────────────────────────────────────────────────────────
      //  3) Render the Gallery Grid (Bootstrap columns + cards)
      //     Each outer <div> gets “item” + its type (“image”, “video”, or “pdf”).
      // ─────────────────────────────────────────────────────────────────────────────
      function renderGallery(dataArray) {
        galleryContainer.innerHTML = "";

        if (!dataArray.length) {
          galleryContainer.innerHTML =
            '<div class="col-12 text-center"><p class="text-muted">No media found.</p></div>';
          return;
        }

        dataArray.forEach((item) => {
          // Outer <div class="col-lg-3 col-md-4 col-sm-6 col-12 item image|video|pdf">
          const col = document.createElement("div");
          col.classList.add(
            "col-lg-3",
            "col-md-4",
            "col-sm-6",
            "col-12",
            "item",
            item.type // “image”, “video”, or “pdf”
          );
          col.style.minHeight = "1px";

          // Card wrapper
          const card = document.createElement("div");
          card.classList.add("card", "h-100", "shadow-sm", "overflow-hidden");

          if (item.type === "image") {
            // ─── IMAGE CARD ────────────────────────────────────────
            const link = document.createElement("a");
            link.href = item.url;
            link.classList.add("image-popup"); // No target="_blank"
            // Magnific Popup will catch clicks on .image-popup anchors

            const img = document.createElement("img");
            img.src = item.url;
            img.classList.add("card-img-top");
            img.alt = item.title || "Image";

            link.appendChild(img);
            card.appendChild(link);

            if (item.title) {
              const body = document.createElement("div");
              body.classList.add("card-body", "py-2", "px-2");
              const title = document.createElement("h6");
              title.classList.add("card-title", "mb-0", "text-center");
              title.innerText = item.title;
              body.appendChild(title);
              card.appendChild(body);
            }
          } else if (item.type === "video") {
            // ─── VIDEO CARD ────────────────────────────────────────
            const videoWrapper = document.createElement("div");
            videoWrapper.style.position = "relative";
            videoWrapper.style.paddingTop = "56.25%"; // 16:9
            videoWrapper.style.overflow = "hidden";

            const video = document.createElement("video");
            video.setAttribute("controls", "controls");
            video.style.position = "absolute";
            video.style.top = "0";
            video.style.left = "0";
            video.style.width = "100%";
            video.style.height = "100%";

            const source = document.createElement("source");
            source.src = item.url;
            source.type = "video/mp4";
            video.appendChild(source);

            videoWrapper.appendChild(video);
            card.appendChild(videoWrapper);

            if (item.title) {
              const body = document.createElement("div");
              body.classList.add("card-body", "py-2", "px-2");
              const title = document.createElement("h6");
              title.classList.add("card-title", "mb-0", "text-center");
              title.innerText = item.title;
              body.appendChild(title);
              card.appendChild(body);
            }
          } else if (item.type === "pdf") {
            // ─── PDF CARD ─────────────────────────────────────────
            const pdfWrapper = document.createElement("div");
            pdfWrapper.classList.add(
              "d-flex",
              "flex-column",
              "align-items-center",
              "justify-content-center",
              "p-4"
            );

            const icon = document.createElement("i");
            icon.classList.add("fas", "fa-file-pdf", "fa-3x", "text-danger");
            icon.style.marginBottom = "0.5rem";

            const title = document.createElement("p");
            title.classList.add("mb-0", "text-center");
            title.innerText = item.title || "PDF Document";

            const link = document.createElement("a");
            link.href = item.url;
            link.target = "_blank";
            link.classList.add("stretched-link");

            pdfWrapper.appendChild(icon);
            pdfWrapper.appendChild(title);

            card.appendChild(pdfWrapper);
            card.appendChild(link);
          }

          col.appendChild(card);
          galleryContainer.appendChild(col);
        });
      }

      // ─────────────────────────────────────────────────────────────────────────────
      //  4) Initialize Magnific Popup inside $(document).ready(...)
      // ─────────────────────────────────────────────────────────────────────────────
      function initializeLightbox() {
        $(".image-popup").magnificPopup({
          type: "image",
          gallery: {
            enabled: true,
          },
          image: {
            titleSrc: "title",
          },
        });
      }

      // ─────────────────────────────────────────────────────────────────────────────
      //  5) Static Filter Logic (show/hide “.item.image”, “.item.video”, etc.)
      // ─────────────────────────────────────────────────────────────────────────────
      function setupStaticFilters() {
        document.querySelectorAll("#filters a").forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            document.querySelectorAll("#filters .nav-link").forEach((el) => {
              el.classList.remove("active");
            });
            link.classList.add("active");

            const filterVal = link.dataset.filter; // "*", ".image", ".video", or ".pdf"
            document.querySelectorAll("#gallery .item").forEach((card) => {
              if (filterVal === "*") {
                card.style.display = "";
              } else {
                const neededClass = filterVal.slice(1);
                if (card.classList.contains(neededClass)) {
                  card.style.display = "";
                } else {
                  card.style.display = "none";
                }
              }
            });
          });
        });
      }

      // ─────────────────────────────────────────────────────────────────────────────
      //  6) Load Gallery from Supabase or LocalStorage
      // ─────────────────────────────────────────────────────────────────────────────
      async function loadGallery() {
        try {
          if (USE_LOCAL_STORAGE) {
            currentData = getStoredGalleryData();
            if (!currentData.length) {
              currentData = await fetchGalleryData();
            }
          } else {
            currentData = await fetchGalleryData();
          }

          renderGallery(currentData);

          // Initialize the lightbox AFTER we’ve injected all <a class="image-popup"> tags
          $(document).ready(() => {
            initializeLightbox();
          });

          setupStaticFilters();
        } catch (err) {
          galleryContainer.innerHTML = `
            <div class="col-12 text-center">
              <p class="text-danger">Error loading gallery: ${err.message}</p>
            </div>`;
          console.error(err);
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        if (!sessionStorage.getItem("reloadedOnce")) {
          sessionStorage.setItem("reloadedOnce", "true");
          location.reload();
        } else {
          loadGallery();
        }
      });
    </script>
  </body>
</html>
